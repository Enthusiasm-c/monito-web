# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö

–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –µ—Å—Ç—å –≤ –≤–∞—à–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```bash
npm run validate:data
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–∫–∞–∂–µ—Ç:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ —Å –∏–Ω–¥–æ–Ω–µ–∑–∏–π—Å–∫–∏–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ (apel fuji ‚Üí Apple Fuji)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω—É–ª–µ–≤—ã—Ö –∏–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö —Ü–µ–Ω
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤
- –û–±—â–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π

## üõ†Ô∏è –í–∞—Ä–∏–∞–Ω—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ï—Å–ª–∏ —É –≤–∞—Å –º–µ–Ω–µ–µ 20% –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π, –º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏:

#### 1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∏–Ω–¥–æ–Ω–µ–∑–∏–π—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è
```bash
npm run fix:indonesian
```

–≠—Ç–æ –±—ã—Å—Ç—Ä—ã–π —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–æ–≤–∞—Ä—å –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ (apel ‚Üí Apple, wortel ‚Üí Carrot)
- –†–∞–±–æ—Ç–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –¥–∞–∂–µ –Ω–∞ –±–æ–ª—å—à–∏—Ö –±–∞–∑–∞—Ö
- –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç standardizedName –∏ name

#### 2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
```bash
npm run fix:data
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è (kg. ‚Üí kg, gr ‚Üí g)
- –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç unitPrice –¥–ª—è –≤—Å–µ—Ö —Ü–µ–Ω
- –£–¥–∞–ª—è–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã (–æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ü–µ–Ω—ã)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç AI –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

#### 3. –¢–æ–ª—å–∫–æ —É–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã
```bash
npm run fix:duplicates
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ (>50%), –ª—É—á—à–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ:

1. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤**
   ```sql
   -- –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–≥—Ä—É–∑–æ–∫
   SELECT DISTINCT 
     s.name as supplier_name,
     u.fileName,
     u.createdAt,
     COUNT(p.id) as product_count
   FROM uploads u
   JOIN suppliers s ON u.supplierId = s.id
   LEFT JOIN prices p ON p.uploadId = u.id
   WHERE u.status = 'completed'
   GROUP BY s.name, u.fileName, u.createdAt
   ORDER BY u.createdAt;
   ```

2. **–û—á–∏—Å—Ç–∏—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö**
   ```bash
   npx prisma db push --force-reset
   npx prisma db seed
   ```

3. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω
   - –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üìä –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–æ–≤

### validate:data
```
üîç Validating data quality...

üìä Data Quality Report
======================

Total Products: 3183
Total Prices: 3183

Issues Found:
‚ùå Indonesian names: 214
‚ùå Null/zero prices: 0
‚ùå Invalid units: 45
‚ùå Missing unit prices: 156
‚ùå Duplicate products: 18
‚ùå Out-of-range prices: 3

üìà 8.9% of products have issues

Sample Indonesian names:
  - apel fuji
  - wortel lokal
  - tomat cherry
  - ayam kampung
  - telur ayam

üí° Recommendations:
1. Run: npm run fix:indonesian
2. Run: npm run fix:data
```

### fix:indonesian
```
üöÄ Quick fix for Indonesian product names

Found 3183 products to check

Found 214 products to fix

Preview of changes:
  "apel fuji" ‚Üí "Apple Fuji"
  "wortel lokal" ‚Üí "Carrot Local"
  "tomat cherry" ‚Üí "Tomato Cherry"
  "ayam kampung" ‚Üí "Chicken Free Range"
  "telur ayam" ‚Üí "Egg Chicken"
  ... and 209 more

Applying updates...
Progress: 50/214
Progress: 100/214
Progress: 150/214
Progress: 200/214

‚úÖ Fixed 214 products!
```

## ‚öôÔ∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏

### –°–∫—Ä–∏–ø—Ç fix-existing-data.ts –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ–ª–∞–≥–∏:

```bash
# –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–µ–Ω (—Ç–æ–ª—å–∫–æ units –∏ prices)
npm run fix:data -- --skip-names

# –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –µ–¥–∏–Ω–∏—Ü
npm run fix:data -- --skip-units

# –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω
npm run fix:data -- --skip-prices

# –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
npm run fix:data -- --skip-duplicates

# –†–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
npm run fix:data -- --dry-run
```

## üö® –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **Backup**: –í—Å–µ–≥–¥–∞ –¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ø–µ—Ä–µ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏
   ```bash
   pg_dump $DATABASE_URL > backup_before_fix.sql
   ```

2. **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**:
   - fix:indonesian - < 1 –º–∏–Ω—É—Ç–∞ –Ω–∞ 5000 —Ç–æ–≤–∞—Ä–æ–≤
   - fix:data - ~5-10 –º–∏–Ω—É—Ç –Ω–∞ 5000 —Ç–æ–≤–∞—Ä–æ–≤ (–∏–∑-–∑–∞ AI)
   - fix:duplicates - < 1 –º–∏–Ω—É—Ç–∞

3. **AI –ª–∏–º–∏—Ç—ã**: 
   - fix:data –∏—Å–ø–æ–ª—å–∑—É–µ—Ç o3-mini –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –±–∞—Ç—á–∞–º–∏ –ø–æ 50 —Ç–æ–≤–∞—Ä–æ–≤
   - –ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å API –∫–ª—é—á —Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º –±–∞–ª–∞–Ω—Å–æ–º

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
   npm run validate:data
   
   # –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å 0 –ø—Ä–æ–±–ª–µ–º –∏–ª–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
   ```

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ cron –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:

```bash
# –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3 –Ω–æ—á–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∏ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å
0 3 * * * cd /path/to/monito-web && npm run validate:data >> /var/log/data-quality.log 2>&1
0 4 * * * cd /path/to/monito-web && npm run fix:indonesian >> /var/log/data-fix.log 2>&1
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç—ã –Ω–µ –ø–æ–º–æ–≥–∞—é—Ç:
1. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤—ã–≤–æ–¥ `npm run validate:data`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫
3. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–ª–Ω—É—é –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö
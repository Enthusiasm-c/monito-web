
> vercel-marketplace-neon@0.1.0 dev
> next dev --turbopack

   â–² Next.js 15.1.6 (Turbopack)
   - Local:        http://localhost:3000
   - Network:      http://192.168.0.215:3000
   - Environments: .env

 âœ“ Starting...
 âœ“ Ready in 534ms
 â—‹ Compiling / ...
 âœ“ Compiled / in 2s
 GET / 200 in 2119ms
 âœ“ Compiled /api/products in 130ms
 GET /api/token-usage 200 in 172ms
 GET /api/uploads/pending-count 200 in 614ms
 GET /api/uploads/status?limit=5 200 in 619ms
 GET /api/suppliers 200 in 632ms
 GET /api/stats 200 in 964ms
 GET /api/products?category=All%20Categories&limit=50&page=1&sortBy=name&sortOrder=asc&search= 200 in 968ms
 âœ“ Compiled /admin in 94ms
 GET /admin 200 in 113ms
 âœ“ Compiled /api/uploads/pending in 63ms
 GET /api/uploads/pending?page=1&limit=10 200 in 619ms
 GET / 200 in 54ms
 GET /api/token-usage 200 in 29ms
 GET /api/uploads/status?limit=5 200 in 73ms
 GET /api/suppliers 200 in 74ms
 GET /api/stats 200 in 119ms
 GET /api/products?category=All%20Categories&limit=50&page=1&sortBy=name&sortOrder=asc&search= 200 in 121ms
 GET /api/uploads/pending-count 200 in 439ms
 â—‹ Compiling /api/upload-smart ...
 âœ“ Compiled /api/upload-smart in 535ms
ğŸš€ Starting background processing for upload: cmbrf0yj10002ouv12uvrde71
ğŸ”„ Starting processing for upload: cmbrf0yj10002ouv12uvrde71
 POST /api/upload-smart 200 in 2322ms
 GET /api/token-usage 200 in 53ms
 GET /api/products?category=All%20Categories&limit=50&page=1&sortBy=name&sortOrder=asc&search= 200 in 148ms
âœ… Updated status to processing for: cmbrf0yj10002ouv12uvrde71
 GET /api/stats 200 in 192ms
 GET /api/uploads/status?limit=5 200 in 340ms
 GET /api/suppliers 200 in 343ms
 GET /api/uploads/pending-count 200 in 481ms
ğŸš€ Enhanced processing starting for upload: cmbrf0yj10002ouv12uvrde71
ğŸ” Enhanced Excel extraction starting: widi wiguna.xlsx
ğŸ“Š Excel file has 3 sheets: Sheet1, Sheet2, Sheet3
ğŸ“„ Processing sheet: "Sheet1"
   ğŸ“‹ Sheet "Sheet1": 242 non-empty rows
   ğŸ”¬ Sheet structure: {
  nameColumn: 1,
  priceColumn: 3,
  unitColumn: 2,
  categoryColumn: -1,
  dataStartRow: 4,
  headerRow: 3
}
ğŸ“„ Processing sheet: "Sheet2"
   ğŸ“‹ Sheet "Sheet2": 0 non-empty rows
   âš ï¸ Skipping sheet "Sheet2": too few rows
ğŸ“„ Processing sheet: "Sheet3"
   ğŸ“‹ Sheet "Sheet3": 0 non-empty rows
   âš ï¸ Skipping sheet "Sheet3": too few rows
âœ… Enhanced extraction completed: widi wiguna.xlsx
   ğŸ“Š Rows: 205/242 (84.7%)
   ğŸ›ï¸ Products: 205
   ğŸ“„ Sheets: 1
   â±ï¸ Time: 768ms
   ğŸ’° Cost: $0.0000
ğŸ¢ Processing supplier: "widi"
   ğŸ“ Phone: Not provided
   ğŸ“§ Email: Not provided
   ğŸ“ Address: Not provided
ğŸ†• Creating new supplier: "widi"
ğŸ“ Supplier detection: "widi" â†’ using cmbrf10fw0003ouv1ea6wrpwx
ğŸ“‹ Upload cmbrf0yj10002ouv12uvrde71 requires approval. Extracted data saved for review.
ğŸ“‹ Processing Log: cmbrf0yj10002ouv12uvrde71 - pending_review - 0.847 completeness
âœ… Enhanced processing completed: cmbrf0yj10002ouv12uvrde71
   ğŸ“Š Completeness: 84.7%
   ğŸ›ï¸ Products: 0
   ğŸ’° Cost: $0.0000
ğŸ‰ Successfully completed processing for: cmbrf0yj10002ouv12uvrde71
 GET /admin 200 in 64ms
 GET /api/uploads/pending?page=1&limit=10 200 in 848ms
 âœ“ Compiled in 27ms
 GET /admin 200 in 77ms
 GET /admin 200 in 17ms
 âœ“ Compiled in 22ms
 GET /admin 200 in 64ms
 GET /admin 200 in 15ms
 GET /admin 200 in 32ms
 GET /admin 200 in 52ms
 GET /api/uploads/pending?page=1&limit=10 200 in 786ms
 GET /admin 200 in 52ms
 GET /api/uploads/pending?page=1&limit=10 200 in 783ms
 âœ“ Compiled in 18ms
 âœ“ Compiled in 21ms
 âœ“ Compiled in 19ms
 âœ“ Compiled in 22ms
 âœ“ Compiled /admin in 19ms
 GET /admin 200 in 92ms
 GET /admin 200 in 14ms
 GET /admin 200 in 13ms
 GET /admin 200 in 12ms
 GET /admin 200 in 12ms
 GET /admin 200 in 12ms
 GET /admin 200 in 12ms
 GET /admin 200 in 12ms
 GET /admin 200 in 13ms
 GET /admin 200 in 14ms
 âœ“ Compiled / in 20ms
 GET / 200 in 77ms
 GET /api/token-usage 200 in 59ms
 GET /api/uploads/pending-count 200 in 1014ms
 GET /api/suppliers 200 in 1017ms
 GET /api/stats 200 in 1090ms
 GET /api/uploads/status?limit=5 200 in 1090ms
 GET /api/products?category=All%20Categories&limit=50&page=1&sortBy=name&sortOrder=asc&search= 200 in 1092ms
 GET / 200 in 47ms
 GET /api/token-usage 200 in 30ms
 GET /api/suppliers 200 in 80ms
 GET /api/products?category=All%20Categories&limit=50&page=1&sortBy=name&sortOrder=asc&search= 200 in 458ms
 GET /api/uploads/pending-count 200 in 464ms
 GET /api/stats 200 in 469ms
 GET /api/uploads/status?limit=5 200 in 726ms
 GET /admin 200 in 48ms
 GET /api/uploads/pending?page=1&limit=10 200 in 939ms
 âœ“ Compiled /api/uploads/reject in 100ms
âŒ Upload cmbrf0yj10002ouv12uvrde71 rejected by admin. Reason: cancel
 POST /api/uploads/reject 200 in 818ms
 GET /api/uploads/pending?page=1&limit=10 200 in 579ms
 GET / 200 in 57ms
 GET /api/token-usage 200 in 30ms
 GET /api/products?category=All%20Categories&limit=50&page=1&sortBy=name&sortOrder=asc&search= 200 in 126ms
 GET /api/suppliers 200 in 128ms
 GET /api/stats 200 in 174ms
 GET /api/uploads/status?limit=5 200 in 327ms
 GET /api/uploads/pending-count 200 in 494ms
ğŸš€ Starting background processing for upload: cmbrhehy50006ouv1iry765nt
ğŸ”„ Starting processing for upload: cmbrhehy50006ouv1iry765nt
 POST /api/upload-smart 200 in 3941ms
 GET /api/token-usage 200 in 54ms
 GET /api/products?category=All%20Categories&limit=50&page=1&sortBy=name&sortOrder=asc&search= 200 in 148ms
 GET /api/suppliers 200 in 149ms
âœ… Updated status to processing for: cmbrhehy50006ouv1iry765nt
 GET /api/stats 200 in 195ms
 GET /api/uploads/status?limit=5 200 in 429ms
 GET /api/uploads/pending-count 200 in 499ms
ğŸš€ Enhanced processing starting for upload: cmbrhehy50006ouv1iry765nt
ğŸ” Enhanced PDF extraction starting: VALENTA cheese supplier.pdf
ğŸ Starting enhanced Python PDF processor...
ğŸ“¤ Python error: /Users/denisdomashenko/Library/Python/3.9/lib/python/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(
ğŸ“¤ Python error: [ERROR] âŒ Camelot lattice extraction failed: Ghostscript is not installed. You can install it using the instructions here: https://camelot-py.readthedocs.io/en/master/user/install-deps.html
ğŸ“¤ Python output: [INFO] ğŸ“¥ Downloading PDF from: https://cdc1w79ssc4kg6xh.public.blob.vercel-storage.com/VALENTA%20cheese%20supplier-GcORWZQQNwJTEfA882gyEvM1wKk7ht.pdf
[INFO] âœ… PDF downloaded to: /var/folders/bg/vg27pvzj23bd_z9kxfqg5zv40000gn/T/tmpma08el3u.pdf
[INFO] ğŸ”§ Trying Camelot Lattice extraction...
[INFO] ğŸ” Camelot lattice extraction starting...
[INFO] ğŸ”§ Trying Camelot Stream extraction...
[INFO] ğŸ” Camelot stream extraction starting...
[INFO] ğŸ“Š Found 5 tables with Camelot stream
[INFO] ğŸ“„ Processing table 1/5
[INFO] âœ… Found name column 0 and price column 1 in camelot_stream_table_1
[INFO] âœ… Table 1: 13 products from 42 rows
[INFO] ğŸ“„ Processing table 2/5
[INFO] âœ… Found name column 0 and price column 2 in camelot_stream_table_2
[INFO] âœ… Table 2: 6 products from 21 rows
[INFO] ğŸ“„ Processing table 3/5
[INFO] âœ… Found name column 0 and price column 1 in camelot_stream_table_3
[INFO] âœ… Table 3: 4 products from 14 rows
[INFO] ğŸ“„ Processing table 4/5
[INFO] âœ… Found name column 0 and price column 2 in camelot_stream_table_4
[INFO] ğŸ”„ Trying mixed content extraction for camelot_stream_table_4
[INFO] ğŸ“ Analyzing 30 text cells for mixed content
[INFO] ğŸ›ï¸ Mixed content extraction found 0 unique products
[INFO] âœ… Table 4: 0 products from 21 rows
[INFO] ğŸ“„ Processing table 5/5
[INFO] âœ… Found name column 0 and price column 2 in camelot_stream_table_5
[INFO] ğŸ”„ Trying mixed content extraction for camelot_stream_table_5
[INFO] ğŸ“ Analyzing 28 text cells for mixed content
[INFO] ğŸ›ï¸ Mixed content extraction found 0 unique products
[INFO] âœ… Table 5: 0 products from 16 rows
[INFO] ğŸ”§ Trying pdfplumber extraction...
[INFO] ğŸ” pdfplumber extraction starting...
[INFO] ğŸ“„ Processing page 1/4
[INFO] ğŸ“„ Processing page 2/4
[INFO] ğŸ“„ Processing page 3/4
[INFO] ğŸ“„ Processing page 4/4
[INFO] âœ… pdfplumber: 0 products from 4 pages
[INFO] ğŸ“Š camelot_stream: 23 products, 114 rows, score: 57.4
[INFO] ğŸ“Š pdfplumber: 0 products, 0 rows, score: 0.0
[INFO] ğŸ† Best method: camelot_stream with score 57.4
=== ENHANCED_JSON_START ===
{
  "supplier": {
    "name": "Indonesian Cheese"
  },
  "products": [
    {
      "name": "HALLOUMI CHEESE",
      "price": 179.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_1",
      "category": null,
      "description": null
    },
    {
      "name": "FETA CHEESE",
      "price": 179.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_1",
      "category": null,
      "description": null
    },
    {
      "name": "COTTAGE CHEESE",
      "price": 181.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_1",
      "category": null,
      "description": null
    },
    {
      "name": "PANEER CHEESE",
      "price": 179.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_1",
      "category": null,
      "description": null
    },
    {
      "name": "RICOTTA CHEESE",
      "price": 95.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_1",
      "category": null,
      "description": null
    },
    {
      "name": "MOZARELLA CHEESE",
      "price": 126.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_1",
      "category": null,
      "description": null
    },
    {
      "name": "CHEDDAR CHEESE",
      "price": 245.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_1",
      "category": null,
      "description": null
    },
    {
      "name": "YOUNG GOUDA CHEESE",
      "price": 255.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_1",
      "category": null,
      "description": null
    },
    {
      "name": "OLD GOUDA CHEESE",
      "price": 269.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_1",
      "category": null,
      "description": null
    },
    {
      "name": "PARMESAN CHEESE",
      "price": 245.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_1",
      "category": null,
      "description": null
    },
    {
      "name": "TOMME CHEESE",
      "price": 245.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_1",
      "category": null,
      "description": null
    },
    {
      "name": "COTIJA CHEESE",
      "price": 245.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_1",
      "category": null,
      "description": null
    },
    {
      "name": "BLUE CHEESE",
      "price": 498.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_1",
      "category": null,
      "description": null
    },
    {
      "name": "HALLOUMI CHEESE",
      "price": 255.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_2",
      "category": null,
      "description": null
    },
    {
      "name": "FETA CHEESE",
      "price": 255.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_2",
      "category": null,
      "description": null
    },
    {
      "name": "COTTAGE CHEESE",
      "price": 190.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_2",
      "category": null,
      "description": null
    },
    {
      "name": "PANEER CHEESE",
      "price": 255.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_2",
      "category": null,
      "description": null
    },
    {
      "name": "RICOTTA CHEESE",
      "price": 117.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_2",
      "category": null,
      "description": null
    },
    {
      "name": "PECORINO CHEESE",
      "price": 399.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_2",
      "category": null,
      "description": null
    },
    {
      "name": "PECORINO CHEESE",
      "price": 399.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_3",
      "category": null,
      "description": null
    },
    {
      "name": "TOMME CHEESE",
      "price": 399.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_3",
      "category": null,
      "description": null
    },
    {
      "name": "CHEDDAR CHEESE",
      "price": 399.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_3",
      "category": null,
      "description": null
    },
    {
      "name": "BLUE CHEESE",
      "price": 598.0,
      "unit": "pcs",
      "sourceMethod": "camelot_stream_table_3",
      "category": null,
      "description": null
    }
  ],
  "errors": [],
  "metrics": {
    "totalRowsDetected": 114,
    "totalRowsProcessed": 23,
    "tokensUsed": 0,
    "costUsd": 0.0
  },
  "extractionMethods": {
    "camelotLattice": null,
    "camelotStream": {
      "tables": 5,
      "rows": 114
    },
    "pdfPlumber": {
      "pages": 4,
      "rows": 0
    },
    "bestMethod": "camelot_stream"
  }
}
=== ENHANCED_JSON_END ===
ğŸ”š Python process finished with code: 0
ğŸ“Š Total stdout length: 6754 characters
ğŸ“Š Total stderr length: 472 characters
âœ… Enhanced PDF extraction completed: VALENTA cheese supplier.pdf
   ğŸ“Š Rows: 23/114 (20.2%)
   ğŸ›ï¸ Products: 23
   ğŸ”§ Best method: camelot_stream
   â±ï¸ Time: 2417ms
   ğŸ’° Cost: $0.0000
ğŸ¢ Processing supplier: "Indonesian Cheese"
   ğŸ“ Phone: Not provided
   ğŸ“§ Email: Not provided
   ğŸ“ Address: Not provided
ğŸ†• Creating new supplier: "Indonesian Cheese"
ğŸ“ Supplier detection: "Indonesian Cheese" â†’ using cmbrhel3w0007ouv15ohfq8jf
ğŸ“‹ Upload cmbrhehy50006ouv1iry765nt requires approval. Extracted data saved for review.
ğŸ“‹ Processing Log: cmbrhehy50006ouv1iry765nt - pending_review - 0.202 completeness
âœ… Enhanced processing completed: cmbrhehy50006ouv1iry765nt
   ğŸ“Š Completeness: 20.2%
   ğŸ›ï¸ Products: 0
   ğŸ’° Cost: $0.0000
ğŸ‰ Successfully completed processing for: cmbrhehy50006ouv1iry765nt
 GET /admin 200 in 51ms
 GET /api/uploads/pending?page=1&limit=10 200 in 635ms
 GET /admin 200 in 48ms
 GET /api/uploads/pending?page=1&limit=10 200 in 665ms
 GET /admin 200 in 53ms
 GET /api/uploads/pending?page=1&limit=10 200 in 633ms
 GET /admin 200 in 48ms
 GET /api/uploads/pending?page=1&limit=10 200 in 653ms
 GET /admin 200 in 55ms
 GET /api/uploads/pending?page=1&limit=10 200 in 660ms
 GET /admin 200 in 52ms
 GET /api/uploads/pending?page=1&limit=10 200 in 630ms
 GET / 200 in 54ms
 GET /api/token-usage 200 in 32ms
 GET /api/products?category=All%20Categories&limit=50&page=1&sortBy=name&sortOrder=asc&search= 200 in 121ms
 GET /api/stats 200 in 125ms
 GET /api/suppliers 200 in 125ms
 GET /api/uploads/status?limit=5 200 in 312ms
 GET /api/uploads/pending-count 200 in 457ms
 GET /admin 200 in 42ms
 GET /api/uploads/pending?page=1&limit=10 200 in 635ms
[?25h
